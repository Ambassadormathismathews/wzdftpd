2005-03-15  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: unresolved symbols when compiling without TLS

2005-03-07  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-5-1

2005-03-05  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: don't try to write empty buffer in LIST
	* bugfix: pasv_ip not working

2005-03-03  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: added simple test suite (unit tests)
	* feature: removed obsolete perm_list
	* feature: removed all occurences of shm

2005-03-01  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: use permissions from command list

2005-02-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: perl: chmod, chgrp, chown
	* feature: perl warnings and errors are logged to a file
	* feature: tcl: chmod, chgrp, chown
	* bugfix: site_cmd not working
	* bugfix: remove context after client exit
	* bugfix: segfault when deleting inexistant group
	* bugfix: max_ul and max_dl not saved for groups (plaintext)

2005-02-21  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-5-0

2005-02-20  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: misc problems with str_dup, str_copy
	* feature: vars_group new (new group creation)

2005-02-13  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: some small memory leaks and potential buffer overflows

2005-02-11  Roman Bogorodskiy <bogorodskiy@inbox.ru>
	
	* feature: added HELP command

2005-02-08  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: server does not change uid when running as root
	* bugfix: added several mutexes to avoid race conditions
	* feature: CHPASS command changed to allow changing own password
	* feature: new directive 'server_gid'

2005-02-04  Pierre Chifflier  <pollux@cpe.fr>

	* feature: new commands SSCN and CPSV, used for secure FXP
	* feature: errors in TCL module are catched and put in a log file
	* bugfix: file descriptors not closed on ident connections
	* bugfix: file descriptors not closed in win32 version
	* bugfix: dynamic_ip not working
	* bugfix: FXP not working when using PORT in clear mode

2005-01-28  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: disable file cache code, it is broken (not thread-safe)
	* bugfix: removed some calls to gethostbyname (not thread-safe)

2005-01-25  Pierre Chifflier  <pollux@cpe.fr>

	* feature: added event DELE when a file is deleted

2005-01-18  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: problems with > 2GB files on 32-bit arches (closes: #0024)

2005-01-14  Pierre Chifflier  <pollux@cpe.fr>

	* feature: use statvfs instead of statfs if detected
	* feature: option "reject_unknown_user" to reject users after USER command
	* feature: the main part (server+lib) now compiles on solaris
	* feature: libwzd-perl now works: wzd_send_message added
	* bugfix: build error on openbsd (crypt.h)

2005-01-12  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: server sending garbage on 64-bits platforms
	* bugfix: libmysql.h missing, unable to compile mysql backend

2005-01-07  Pierre Chifflier  <pollux@cpe.fr>

	* feature: all site commands converted to new format
	* feature: configure checks if system adds _ to exported symbols
	* bugfix: include wchar.h only if needed

2005-01-03  Pierre Chifflier  <pollux@cpe.fr>

	* feature: added pam authentication via libwzd-auth
	* feature: added TLS client certificate check via libwzd-auth
	* feature: new config directives tls_ca_file and tls_ca_path
	* feature: backend plaintext use libwzd-auth
	* bugfix: no timeout on read/write with gnutls
	* bugfix: site color does not remove flag correctly
	* bugfix: misc problems in SITE commands
	* bugfix: memory leak in %if cookie

004-12-18  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: cannot remove directories with message (closes: #0023)

2004-12-15  Pierre Chifflier  <pollux@cpe.fr>

	* feature: new config directive 'tls_certificate_key'
	* feature: new library libwzd-auth

2004-12-13  Pierre Chifflier  <pollux@cpe.fr>

	* feature: removed server limitations for users/groups. The same has
	to be done in backends to be fully effective.
	* feature: removed limitations in backend plaintext
	* feature: removed backend_storage

2004-12-10  Pierre Chifflier  <pollux@cpe.fr>

	* feature: send_message functions rewritten to use safe strings

2004-12-08  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: crash during site purge (closes: #0022)

2004-12-06  Pierre Chifflier  <pollux@cpe.fr>

	* feature: user cache and group cache changed for double-indexed hash
	tables (name and uid)

2004-12-02  Pierre Chifflier  <pollux@cpe.fr>

	* feature: context_list changed to be a real dynamic list, as well as
	ident_list. This removes the hard limitation on connected users.
	* feature: user cache and group cache changed for dynamic lists too

2004-11-29  Pierre Chifflier  <pollux@cpe.fr>

	* feature: MySQL backend now almost working !
	* feature: max_ul and max_dl vars can be changed during runtime, with
	immediate effects
	* feature: changing speed limits for users is also applied on logged users

2004-11-25  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: problems with locale in LIST (closes: #0020)
	* bugfix:  Can't chdir inside symbolic links  (closes: #0021)
	* optimization:  replaced string comparisons with integers comparisons

2004-11-08  Pierre Chifflier  <pollux@cpe.fr>

	* feature: new library libwzd to help creating standalone applications
	* feature: converted siteconfig, siteuptime and sitewho to use libwzd
	* feature: removed shared memory, it was now useless
	* feature: new convenience library libwzd-base (statically linked) to
	avoid recoding same functions in different progs

2004-10-30  Pierre Chifflier  <pollux@cpe.fr>

	* feature: new commands SITE VARS, VARS_USER, VARS_GROUP
	* bugfix: use same names in vars_user get and set

2004-10-19  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: potential DoS (ident connections not closed correctly)

2004-10-01  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: site chacl broken
	* bugfix: segfault on idle timeout
	* bugfix: remove duplicate flags when changing user flags (closes: #0004)
	* bugfix: no more possible to change user_slots/leech_slots for non-gadmins
	* bugfix: unable to delete file after failed upload (closes: #0008)
	* bugfix: free space is taken from drive c: (closes: #0001, #0009)
	* bugfix: could not get free space when using backslashes (closes: #0010)
	* bugfix: user ip check fails if ip1 was deleted (closes: #0012)
	* bugfix: crash using link remove -r with bad arguments (closes: #0013)
	* bugfix: files with spaces corrupting .dirinfo (closes: #0014, #0015)
	* bugfix: permissions changes not displayed for vfs (closes: #0017)
	* feature: site chmod now accepts string version of permissions

2004-09-13  Pierre Chifflier  <pollux@cpe.fr>

	* feature: GnuTLS support
	* feature: KILLPATH, site, perl and tcl (kill all users inside given directory)
	* IMPORTANT: wzd.cfg and users files renamed to .sample

2004-09-08  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: wzdftpd broken on debian arm, ppc and s390 (Thanks to zentor)
	* bugfix: missing va_end when using va_start
	* bugfix: site grpadd and grpdel not working
	* bugfix: site change group without arg cause segfault
	* bugfix: site purge broken
	* bugfix: misc important problems in backend plaintext
	* bugfix: ip *@* not working

2004-08-31  Pierre Chifflier  <pollux@cpe.fr>

	* bugfix: segfault when deleting symlink with non-existent target
	* bugfix: uptime display broken
	* feature: added patch from Tobias Bengtsson to allow group members of
	gid=0 to get siteop access using PAM backend.
	* cookies: %usertime (time online for this session)

2004-08-28  Roman Bogorodskiy <bogorodskiy@inbox.ru>
	
	* bugfix: fix build on FreeBSD 4.x

2004-08-25  Pierre Chifflier  <pollux@cpe.fr>

	* --- cvs commit TAG: rel-0-4-0

	* bugfix: changed EPSV reply code to 229 (to be RFC-compliant)
	* bugfix: avoid segfault on freebsd when kernel has no shm support

2004-08-14  Pierre Chifflier  <pollux@cpe.fr>

	* feature: some code audit using splint. Fixed some warnings
	* feature: tcl/perl: vfs remove -r
	* feature: config option data_buffer_length
	* feature: flag K (enforce TLS data connections)
	* feature: site change user flags now accepts arguments like +H or -I
	* feature: site flags can now change flags
	* feature: site change credits
	* feature: new vars credits (user)
	* bugfix: many commands not working inside symlinks (RETR, STOR, etc)
	* bugfix: site chmod 0 not working
	* bugfix: disabled command SAVECFG (Not Yet Implemented)
	* bugfix: perl: 'vars_user set' reporting errors on success

2004-08-08  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: transfer data buffer is now dynamic, size can be tweaked in config
	* feature: changed semaphore to mutex in bandwidth limiter
	* bugfix: segfault when exiting (when freeing shm vars)
	* bugfix: wzd_mutex_create always returning NULL

2004-08-06  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: permissions not displayed correctly on windows (again)

2004-08-04  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: PORT not working in IPv4 when compiled with IPv6

2004-07-29  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: user cache system moved to lib

2004-07-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: boostrap script should *really* work on all platforms
	* feature: mysql backend restarted (almost) from scratch, tables redesign
	* bugfix: some typos

2004-07-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: split ip addresses related functions to specific file
	* feature: new routine ip_compare
	* bugfix: login_pre_ip_allowed not working (missing \0) in ip_add

	* IMPORTANT: no more '+' or '-' in ip addresses

2004-07-11  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: print text file in custom site command
	* feature: site SU (Set Userid, steal someone's identity)
	* feature: event PREDOWNLOAD
	* feature: PREDOWNLOAD and PREUPLOAD scripts can deny upload
	* feature: site rusage can now read opened fd on linux 2.6
	* bugfix: vars_shm set not working in perl

	* IMPORTANT: from now, uid is NOT user's index in list

2004-07-05  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: typo in vars, used tagline instead of tag for group
	* cookies: %include(filename) includes and parses file contents
	* feature: added API for mutexes

2004-06-15  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: typo in siteconfig giving wrong pasv_range for 'get all'
	* bugfix: typo in pgsql.m4 displaying OpenSSL

2004-06-11  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: site_cmd not working (yeah, again)
	* bugfix: fixed SSL flags in backends and modules
	* doc: updated inline doc (fox doxygen)
	* feature: removed some unused structs to reduce memory use

2004-06-08  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: transfer duration gets better precision
	* feature: killed some static struct, reducing memory usage
	* backends: removed CHPASS function, part of MOD_USER

	* IMPORTANT: from now, uid MUST be unique for users !

2004-06-05  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: arguments not passed to custom site commands
	* bugfix: ABOR command leaves files unclosed, and non-RFC reply
	* bugfix: missing tools in visual installer

2004-05-26  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: all users created with same uid
	* bugfix: wrong reply for unknown site commands, or if errors in handler
	* cookies: %bwtotal_dl (2) %bwtotal_ul (2) to get total bandwidth used
	* cookies: %connected_users to get number of connecter users
	* feature: when running in debug mode, putlog sends into to both stdout and log
	* tcl: added self-test to detect runtime errors

2004-05-24  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: new config directive: umask, to set default files/dirs permissions
	* feature: randomize PASV ports, hopefully it will avoid reusing same connections
	* feature: vars_shm (API, TCL, Perl)
	* doc: update on PERL module, server variables
	* doc: added examples for tcl and perl
	* bugfix: sfv module use case-sensitive file names on windows
	* bugfix: send_message with empty message returns garbage (TCL, Perl)

	* IMPORTANT: behaviour change: only file owner and siteop can delete
	file, except if you set a specific permission line in config file

2004-05-18  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: new module: PERL
	* configure.in: display summary of detected options at end of configure
	* doc: modifications to allow generation of php
	* bugfix: allow OPTS command in login sequence to please lftp
	* bugfix: memory leaks in TCL module
	* bugfix: fixed compilation for linux when enabling UTF-8
	* bugfix: TCL: if no arguments, $wzd_arg pointer is not initialized
	* bugfix: windows installer: do not overwrite wzd.pem if existing

2004-05-15  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: new server vars to manipulate user data
	* bugfix: unable to create dirs inside symlinks
	* bugfix: custom site commands causing segfault
	* bugfix: unused strange file descriptor on certificate (wzd_init_lex.l)
	* bugfix: EVENT_LOGOUT sent twice
	* bugfix: return correct message when SITE command is unknown
	* bugfix: unclosed handle after FXP (closes #954477)
	* tcl: each client now run commands in a separate slave interpreter
	* tcl: send_message now parse cookies and can be multi-line
	* tcl: new command vars_group get/set

	* IMPORTANT: behaviour change: site commands with no explicit permission
	line in config are now allowed, whereas before they were not

2004-05-09  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: system path management rewritten from scratch (obsoletes: checkpath)
	* feature: soft symlinks (mainly for win32, will avoid crappy ms
	junctions, never worked correctly)
	* feature: TCL module updated (stat, vfs link)
	* bugfix: forgot to unregister fd on cache hit
	* bugfix: site chacl, chgrp, chmod and chmod replies are more verbose
	* bugfix: permissions are displayed correctly on LIST (closes: #929764)
	* doc: update on TCL module, many corrections
	* doc: finally I begin to understand how to customize docbook output
	with a dsl file

2004-04-30  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: log file empty on win32 (except if forcing use_syslog = 0)
	* bugfix: user can now see its own home
	* tcl: command putlog
	* feature: group tagline, cookie %grouptag
	* cookies: %lastfile{name,size,speed,time}

2004-04-26  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: LIST not working for / , and symlinks destination not shown
	* feature: crontab now use hook system and allows protocols, etc.
	* feature: added wzd_utf8.{c,h} (reserved for future UTF-8 extension)
	* doc: update on module development, TCL module

2004-04-23  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: moved some structs into their proper headers
	* feature: new api to list directory entries, much easier and cleaner
	* feature: new command STAT to provide a fast way to list dir

2004-04-20  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: segfault when exiting on error unable to bind
	* bugfix: try to fix race conditions with stat/open
	* change: paths for log files and config files have changed

2004-04-13  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-3

	* tcl: command vfs (mkdir/rmdir/link create/remove)
	* bugfix: RNTO without RNFR not rejected (could have side effects with RETR/STOR)
	* bugfix: REST not working on win32
	* bugfix: NLST not working
	* bugfix: GetMyContext() not working
	* bugfix: num_logins has strange behaviour
	* bugfix: site KILL was very unclean on win32
	* bugfix: wrong context in loop (fixes: pid is wrong in site SWHO)

2004-04-07  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: datafd set to 0 (could cause problems in release mode)
	* bugfix: service is registered with config file name (visual)
	* bugfix: more work on possible unclosed fd
	* bugfix: finally, I've found a way to combine cscripts and RFC replies !

2004-04-06  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: failed logins are loggued (message LOGIN_FAILED)
	* debug: functions to debug file descriptors (FD_REGISTER)
	* bugfix: possible unclosed file descriptors in RETR and STOR

2004-04-05  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: site PERM add/change/remove/show
	* bugfix: dynamic_ip=1 not working on win32
	* bugfix: FEAT allowed in login sequence (makes lftp happy)
	* doc: update for commands site link, msg, perm, wipe

2004-04-01  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: %filepath not accessible in event MKDIR
	* bugfix: another try to get correct size for big files on win32
	* bugfix: group homedir containing spaces or tabs destroyed
	at server start (plaintext)
	* bugfix: error in sfv create (size was stored in state)
	* feature: moved file sizes to 64 bits

2004-03-30  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: file cookies not working for POSTUPLOAD event
	* bugfix: problems calling tcl script with arguments
	* feature: added vars_user_{get,set} and interface in tcl

2004-03-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: first service implementation (visual): register/unregister, start/stop
	* cosmetic: cleaned up all tabs in files
	* bugfix: arguments are interpreted on visual
	* bugfix: tls implicit mode broken (initialized twice)

2004-03-26  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: num_logins broken
	* bugfix: LIST not working at root dir (visual)

2004-03-25  Pierre Chifflier  <pollux@wzdftpd.net>

	* vars: new server vars hide_dotted_files, deny_access_files_uploaded
	* site: new command 'SITE PERM' (Work in Progress !)
	* bugfix: parameters works only for backend 'plaintext'
	* mysql: arguments are parsed correctly now

2004-03-24  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: segfault when reading permissions in config file

2004-03-22  Pierre Chifflier  <pollux@wzdftpd.net>

	* cookies: filecrc (uploaded\downloaded file crc)
	* bugfix: some cookies not working because of wrong context pointer

2004-03-21  Pierre Chifflier  <pollux@wzdftpd.net>

	* cookies: userpwd (user path, relative to home dir)
	* cookies: userpath (user path, absolute in filesystem)
	* cookies: filepath (uploaded\downloaded file path, absolute)
	* bugfix: event POSTDOWNLOAD not called
	* bugfix: wrong file size for files > 4Go (visual) (closes: #920425)
	* feature: added strlcat default implementation if missing
	* security: sources passed to 'rats' and 'pscan'
	* security: some buffers changed to be dynamic, replace strcat with strlcat

2004-03-17  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: custom site commands and hooks (cscripts) now use cookies as arguments
	* doc: new section on custom commands
	* wzd_misc.c: new function get_bandwidth()
	* feature: get/set server variables (wzd_vars.c, wzd_vars.h)
	* siteconfig: use new api to server variables
	* tcl: use new api to server variables, function tcl_vars

2004-03-04  Pierre Chifflier  <pollux@wzdftpd.net>

	* debian: debian packages restarted from scratch
	* bugfix: removed compilations speed-ups, conflicting with openssl

	* IMPORTANT: installation path changed for *.txt, and  users files

2004-03-03  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: fixed build on visual
	* feature: added tcl module to visual project

2004-03-02  Pierre Chifflier  <pollux@wzdftpd.net>

	* configure.in: openssl is now autodetected

2004-03-01  Pierre Chifflier  <pollux@wzdftpd.net>

	* backends: pam backend started
	* configure.in: berkeley db headers and libs detection

2004-02-29  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: first implementation of protocols (used in custom
        scripts and custom site commands)
	* tcl: site tcl, tcl protocol - module is basically working
	* configure.in: mysql headers and lib detection
	* doc: several updates

2004-02-28  Roman Bogorodskiy <bogorodskiy@inbox.ru>

	* backends: mysql backend started

2004-02-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: infinite loop when waiting ident response when connect times out (linux)

2004-02-24  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: missing O_BINARY for permission file (visual)
	* bugfix: remove wzd_server_uid var (causing link problems)
	* bugfix: incomplete and progress bar not working (visual)

2004-02-17  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: WZD_MODULE_CLOSE function called (if existing) before module unload
	* feature: module_unload()
	* feature: hook_unload()
	* feature: new module: TCL
	* bugfix: persistant color codes on console, resulting in a disco-console after a crash
	* bugfix: modules were not dlclosed
	* bugfix: server do not reply on site command which does not exist but is permitted
	* bugfix: tls lib freed before all childs are dead
	* bugfix: segfault when deleting file with no owner
	* bugfix: some static buffers converted to dynamic
	* bugfix: ignore SIGINT when exiting
	* bugfix: segfault when using REST, TYPE or CWD with no argument

2004-02-16  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: incorrect path displayed in DELDIR event
	* bugfix: possible buffer overflow in LIST command

2004-02-13  Pierre Chifflier  <pollux@wzdftpd.net>

	* docs: added notes for FreeBSD (contribution from Roman Bogorodskiy)
	* bugfix: files corrupted after upload on windows (closes: #885559)

2004-02-11  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: incorrect path displayed in NEWDIR event
	* bugfix: debian package with incorrect dependancy on virtual package
	* bugfix: use WZD_MAX_PATH instead of random number for max path length

2004-02-06  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: segfault in socket_connect() on FreeBSD

2004-02-05  Pierre Chifflier  <pollux@wzdftpd.net>

	* optimization: removed strcasecmp/strncpy in perm_find_create
	* bugfix: compile error with ipv6 on FreeBSD

2004-02-02  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: site link create/remove (win32/visual)

2004-01-30  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: site link create/remove (posix platforms)

2004-01-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-2

	* feature: site unlock file

2004-01-26  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: incorrect order of arguments in ident request
	* bugfix: socket_connect not working on visual

2004-01-23  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: missing \0 on short msg replies (closes: broken SIZE command)
	* bugfix: wrong locking query method used (visual)
	* bugfix: wrong length showed in log for empty files
	* bugfix: files not locked during upload
	* bugfix: files opened in wrong memory space for upload (visual)
	* bugfix: wzd_cache_gets no working for oneliners (closes: site msg
	show not working for one-line messages).

2004-01-21  Pierre Chifflier  <pollux@wzdftpd.net>

	* visual: fix build for release version
	* visual: removed some warnings

2004-01-19  Pierre Chifflier  <pollux@wzdftpd.net>

	* visual: locking files routines

2004-01-15  Pierre Chifflier  <pollux@wzdftpd.net>

	* visual: added tools

2004-01-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* ipv6: fix ip formatting in log file

2004-01-08  Pierre Chifflier  <pollux@wzdftpd.net>

	* visual: fix build, IPv6 code compiles (though win2k does not support ipv6)
	* visual: clean up threads when client exit

2004-01-07  Pierre Chifflier  <pollux@wzdftpd.net>

	* wzd_misc.c: fix incorrect free space size reported
	* wzd_socket.c: change socket_connect() to accept IPv6
	* wzd_ClientThread.c: implementation of EPRT (IPv6)
	* wzd_ServerThread.c: ident connection use same net family as control
        connection (IPv6)
	* configure.in: check for function inet_pton() and provides
        replacement code if necessary

2004-01-06  Pierre Chifflier  <pollux@wzdftpd.net>

	* cookies: msg delete (remove dir_message)
	* cookies: msg convert (rename a file to dir_message)
	* cookies: msg new (replace dir_message with given line)
	* cookies: msg append (append given line to dir_message)
	* wzd_crc32.c: generate CRC32 on file portion
	* wzd_md5.c: generate MD5 on file portion
	* bugfix: XCRC / XMD5 without arg made server crash
	* configure.in: WZD_VERSION_STR created at ./configure time and uses
        autoconf macros

2003-12-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* wzd_ServerThread.c: ident is checked by main thread before accepting connection
	* some code cleanup
	* cookies: msg (prints dir_message)
	* site msg: directory messages management

2003-12-17  Pierre Chifflier  <pollux@wzdftpd.net>

	* wzd_dir.c: function to get the n trailing parts of a filename
	* visual: bugfix could not chdir when destination is a top-level dir (c:\) 

2003-12-17  Pierre Chifflier  <pollux@wzdftpd.net>

	* visual: some bugfixes on malloc/free, ensure we can use windows-like paths

2003-12-15  Pierre Chifflier  <pollux@wzdftpd.net>

	* siteconfig: get bandwidth

2003-12-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: change all malloc and free to internal function
          wzd_{malloc,free} to avoid memory problems on win32

2003-12-10  Pierre Chifflier  <pollux@wzdftpd.net>

	* feature: renamed chrgrp to changegrp, and implemented chgrp

2003-12-08  Pierre Chifflier  <pollux@wzdftpd.net>

	* wzd_dir.c: functions to manipulate file/dir names
	* wzd_socket.c: functions to find local/remote port
	* wzd_messages.c: write_message_footer function obsolete, replaced by cookies
	* feature: ident support
	* bugfix: SIZE command not sending \r\n
	* doc updated

2003-11-30  Pierre Chifflier  <pollux@wzdftpd.net>

	* native win32 version, using visual c++
	* added strptime, strtoull detection & default implementation if missing
	* cookies: spacefree, spacetotal, sectionname

2003-11-24  Pierre Chifflier  <pollux@wzdftpd.net>

	* added strtok_r detection & default implementation if missing
	* functions to open/close log file in lib
	* functions to open/close xferlog file in lib
	* bugfix: spaces were managed oddly in cookies

2003-11-18  Pierre Chifflier  <pollux@wzdftpd.net>

	* removed 'unsigned long long' type, replaced with 'u_int64_t'
	* added md5 code to main lib
	* implemented 'XMD5' command

2003-11-17  Pierre Chifflier  <pollux@wzdftpd.net>

	* started implementation of 'PRET' command (see lftp, GridFTPD, DrFTPD)
	* sfv module: diz/sfv files are processed to guess number of files to be uploaded
	* definitly removed internal sfv checker, but integrated crc32 code in
	  main lib (to be used by other functions)
	* implemented 'XCRC' command

2003-11-14  Pierre Chifflier  <pollux@wzdftpd.net>

	* cookies can be used inside messages and ftp replies
	* bugfix: more checks on size for messages > 1024 bytes
	* function cookie_parse_buffer modified to parse buffer without sending data

2003-11-10  Pierre Chifflier  <pollux@wzdftpd.net>

	* sfv module: zip files are checked after upload, using the zlib for decompression
	  (note: multipart zip files are not supported)

2003-11-07  Cyprien Laplace  <cyprien33@laposte.net>

	* added a "site group" command to administrate groups

2003-11-02  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: segfault when adding section failed

2003-10-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* Try to search config file in path given in ./configure
	* bugfix: erasing server options after setting default values ...
	* option to force shm cleanup if existing when starting
	* bugfix: syslog was not used even if enabling it

2003-10-20  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-1

	* added periodic commit of backend
	* site savecfg is now almost working
	* IMPORTANT CHANGE: negation on permissions can now be written =!user
	  instead of !=user
	* custom messages can now be stored in files
	* added optional PostgreSQL detection in configure
	* cookies in vfs VIRTUAL dir: %username, %usergroup, %userhome

2003-10-15  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: waiting PASV sockets not closed when client dies
	* some work on ipv6
	* win32: --enable-winsock is now yes by default
	* some structures are no more opaque, so we'll save the config file in a near future !
	* mpatrol support to debug/find leaks/profile application
	* some more facilities to debug cache/crontab/perms

2003-10-11  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: opened files/dirs not closed on sfv checker (closes: Too Many Opened Files
	  after several uploads, all platforms)

2003-10-01  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: spaces at end of USER and PASS lines were removed
	* ssl: use SSL_CTX_use_certificate_chain_file instead of SSL_CTX_use_certificate_file

2003-09-22  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: wrong display of ip addresses in log file
	* bugfix: error `wzd_server_uid' undeclared (first use in this
	  function) during compilation on cygwin

2003-09-16  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: group.num_logins not initialized when adding a new group

2003-09-16  Cyprien Laplace  <cyprien33@laposte.net>

	* added a "module_name" in module symbols
	* added backend_get_version() and backend_get_name() in wzd_backend.c
	* added new files wzd_savecfg.c wzd_savecfg.h with wzd_savecfg() function
	* added a new site command 'site savecfg' to call wzd_savecfg()
	* modified the default way that ip and dynamic_ip are set (was buggy if not in wzd.cfg!)

2003-09-11  Cyprien Laplace  <cyprien33@laposte.net>

	* added 'vfs_remove' function, to remove a vfs entry
	* added special cookie forallvfs
	* added cookies vfsvirtual, vfsphysical, vfstarget
	* added 'file_vfs.txt'
	* added 'site vfsls', 'site vfsadd', 'site vfsdel' commands, to list
	  active virtual filesystems, add a vfs, and remove a vfs


2003-09-10  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: incorrect section match (closes: unable to create dirs in sections)
	* bugfix: incorrect config file parsing (closes: unable to have
	  section names beginning with anything but a letter)

2003-09-08  Pierre Chifflier  <pollux@wzdftpd.net>

	* Display real owner in LIST (this implementation is particularly bad - we rely on the cache)
	* Display section on end of LIST ANSWER when in section

2003-09-05  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: segfault when two or more sections
	* display section on end of LIST command

2003-09-03  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-1rc5

	* call fini function when unloading backend
	* fix build on cygwin

2003-08-28  Pierre Chifflier  <pollux@wzdftpd.net>

	* added some debug stuff
	* bugfix: do not include lex'ed C files (build fails on cygwin)
	* some work on the debian package
	* configure: PTHREADS detection changed to another macro
	* This should work on all archs and close "gcc: unrecognized option'-pthread'"
	  on cygwin

2003-08-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: autogen.sh not working on bsd
	* bugfix: O_SYNC not declared on freebsd 4.8
	* bugfix: undefined reference to getopt_long on freebsd 4.8
	* bugfix: undefined reference to errno on Mandrake 9.1
	* added auto-generated .c files to 'make distclean' target

2003-08-07  Pierre Chifflier  <pollux@wzdftpd.net>

	* renamed CP_USER to CPERM_USER (conflicts with system definition in bsd)

2003-06-29  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: segfault when using SSL+protected data mode+PORT

2003-06-17  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: added missing include for BSD
	* bugfix: user credits taken even with a ratio of 0 (leech)

2003-06-13  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: site change perms modifying max_idle
	* allow modifications of group->num_logins
	* added 'site grpchange' command, to modify group fields (equivalent of site
	  change for users)
	* bugfix: configure called with no --prefix= replace ${prefix} by NONE

2003-06-12  Roman Bogorodskiy  <bogorodskiy@inbox.ru>

	* fixed segfault when PORT command has no arguments

2003-06-03  Pierre Chifflier  <pollux@wzdftpd.net>

	* sfv module: announce when release is complete
	* site addip and delip can take several ip on one line

2003-05-31  Pierre Chifflier  <pollux@wzdftpd.net>

	* fixed potential bug with syslog()
	* index slot number from 1 in site delip and grpdelip
	* better error message for tls wrapper init (cygwin)
	* bugfix: stor with an absolute path name does not work
	* try default/arg conf, then /etc/wzd.cfg and /etc/wzdftpd/wzd.cfg for config file
	* added special cookie forallgroups

2003-05-28  Pierre Chifflier  <pollux@wzdftpd.net>

	* added 'site groups' command to list groups
	* fixed bug with do_site_print_file when file was not present
	* do not check file descriptors using winsock, cygwin fstat fails
	* fixed vfs add always reporting as failure
	* fixed: chdir not checking if file was hidden
	* updated configure to use a more standard installation
	* updated docs: How to report bugs
	* warn user when setting both flags SITEOP and GADMIN

2003-05-23  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: permission file not correctly updated if several modifications
	  happens in the same second (mtime field in filesystem is not updated)
	* many enhancements in error messages
	* symlinks to nonexistant files are now displayed
	* symlinks are now displayed as 'name -> target' in LIST
	* sfv: progressmeter is shown after uploading the sfv file
	* doc updated (installation, config, sfv module)
	* sfv parameters (progressmeter, etc) are server parameters (thus defined in
	  config file)

2003-05-21  Pierre Chifflier  <pollux@wzdftpd.net>

	* fixed stupid bug were fields were not correctly initialized when creating
	  new user
	* fixed segfault on rename dir
	* bugfix: permission sometime disappear when renaming file

2003-05-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* added some functions to debug: test if a file descriptor is valid, etc.
	* fixed some small memory leaks

2003-05-07  Pierre Chifflier  <pollux@wzdftpd.net>

	* syslog integration
	* fixed several bugs
	* support parameters in config
	* some cygwin-related bugfixes
	* long options support

2003-04-30  Pierre Chifflier  <pollux@wzdftpd.net>

	* fixed bug: segfault if unable to bind to specified port
	* fixed bug: segfault if unable to write users file at server exit
	* changed file locking code to allow locking files without opening them
	  in read-write mode. This also removes a race condition
	* changed reply code to 550 if file not found (RETR)

2003-04-29  Pierre Chifflier  <pollux@wzdftpd.net>

	* fixed bug: server segfault if homedir does not exist
	* patch to run on FreeBSD

2003-04-25  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-1rc4

	* do not send multiple 501 answers when STOR or RETR fails

2003-04-24  Pierre Chifflier  <pollux@wzdftpd.net>

	* specific error message when server can't go to user homedir at login
	* possibility to hide files beginning by '.' ('hide_dotted_files')
	* try to erase shm zone when server exits on error (only if created !)
	* delete pid file if it exists

2003-04-21  Pierre Chifflier  <pollux@wzdftpd.net>

	* site grpkill: kill all connected members from a group
	* number of members connected at the same time can be limited for each group
	* work on IPv6 compatibility
	* crontab changed to accept classical crontab definition
	* (min hour day month day_of_week)
	* site grpren: rename group
	* site grpdel removes all references to group, and send warnings if deletion
	  creates users with no groups or changes user main group
	* site wipe: delete file/dir recursively, without affecting user stats
	* location pointer in file was shared by all clients connected to cache !
	* fixed CRITICAL bug: context->datafd was closed without testing it, with a
	* default value of 0 which IS a valid socket value !
	* again, fixed problem when creating dir at the physical root of the server ...

2003-04-17  Pierre Chifflier  <pollux@wzdftpd.net>

	* string analysis in cookie parser rewritten using a flex parser
	  this has many benefits, allowing to use nested if/for statements, colors, etc.
	* new flag FLAG_COLOR to enable colors in ftp answers (default: disabled)

2003-04-14  Pierre Chifflier  <pollux@wzdftpd.net>

	* user lose credits and stats when deleting files
	* put permission files in cache (should speed up server a lot !)
	* site kill/kick changed to use same code in all modes (mt/mp)

2003-04-09  Pierre Chifflier  <pollux@wzdftpd.net>

	* big patch to compile and run on OpenBSD
	* sections, using path-filters to enforce dir names when created

2003-04-07  Pierre Chifflier  <pollux@wzdftpd.net>

	* build method changed to automake/autoconf
	* backend and module directives in config file can handle absolute filenames
	* new directive 'logfile' to change log file location
	* new member 'credits' in user struct
	* stats on number of files uploaded/downloaded
	* new cookies: credits & credits2, last_login, files_dl, files_ul
	* site give/take

2003-04-03  Pierre Chifflier  <pollux@wzdftpd.net>

	* vfs: added a permission field, which allow per user/group/flag vfs
	  (using same syntax as for site commands)
	* backend plaintext: block signals when writing users file, to avoid being interrupted
	  while writing (double-ctrl+c malediction)

2003-03-25  Pierre Chifflier  <pollux@wzdftpd.net>

	* complete rewrite of config file analyser to use flex
	* site commands handling rewritten
	* write footer informations (space left on device, stats on upload/download) after LIST
	* v_format_message modified to avoid sending message end mark if code
	  is negative
	* added custom site commands
	* added message customization support in config file
	* enhanced cache implementation, with maximum size to cache and
	  hit/miss/refresh mechanism
	* site grpadd (adds a new group), grpdel, grpaddip, grpdelip, gsinfo, grpratio, ginfo
	* new cookies: forallgroupmembers, groupname, groupratio, grouptotal_ul/dl,
	  grouphome, groupmaxidle, groupmaxdl/ul, groupip_allow[0-7]
	* new cookies: usertotal_ul2/dl2 convert number to units (T/G/M/k/b) before dislay
	* when user is deleted his tagline is replaced by '**DELETED**' in cookies
	* updated doc !
	* new directive 'backend_param_plaintext' to give users file to backend
	* rename message_file to dir_message
	* fixed CRITICAL bug, server crash when login with (null) username or pass
	* fixed IMPORTANT bug in cookies_replace function, testing cookie value
	  after modifying it (not in the switch/case way)
	* fixed IMPORTANT bug in plaintext backend: crash with input 'privgroup '

2003-03-20  Pierre Chifflier  <pollux@wzdftpd.net>

	* changed default compiler to gcc (was gcc-3.2) for linux
	* more checks on string length
	* reduction of buffer size for some variables (lighter in memory !)
	* fixed MANY potentials small problems (leaks/corruptions) using the
	  valgrind debugger to detect
	* renamed pasv_up_range to pasv_high_range
	* first implementation of external hooks (aka cscript)
	* site close/reopen: temporarily close the server except for siteops (e.g for
	  maintenance)

2003-03-10  Pierre Chifflier  <pollux@wzdftpd.net>

	* changed stats ul/dl type from unsigned long to unsigned long long
	* cookie: ratio
	* users file directive: ratio (users/groups)
	* site chratio (change user ratio)

2003-03-05  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-1rc3

	* new command: APPE (append with create)
	* site adduser: syntax changed, homedir is replaced by primary group
	* new directive default_home for groups, used when creating users to determine
	  home dir
	* site purge: without arguments, iterate users to purge all deleted users.
	* fields user_slots, leech_slots added to wzd_user_t struct
	* GAdmins: site adduser/deluser/purge/chpass/readd/addip/delip/change
	  commands can be run by GAdmins, only for users from their main group
	* sitebot: commands modified to be contained in namespace, to avoid conflicts
	  with other scripts
	* sitewho: hide arguments from SITE commands
	* server can use another config file using the '-f filename' option
	* cookie: slots, leechslots: show gadmin slots (if gadmin !)
	* cookie: conditionnal cookie, using %if
	* site change: siteop can modify user_slots and leech_slots

2003-02-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* huge change: winsock2 support, with tls (using a wrapper compiled with VC++,
	  due to incompatibilities between BSD and winsock sockets)
	* bugfix: idle time counter not reset at the end of dl/ul/list
	* bugfix: bytes_ul_total (dl) written as long int instead of unsigned long int
	* site invite (tells the sitebot to invite you)

2003-02-22  Pierre Chifflier  <pollux@wzdftpd.net>

	* tools now accept '-k key' argument, to work if server uses another key
	* sitebot configuration modified to use specific key

2003-02-15  Pierre Chifflier  <pollux@wzdftpd.net>

	* update speed in limiter_add function
	* fixed kindof memory leak (forgot to free permissions list at exit, not
	  really usefull as we are exiting, but it is better, isn't it ? :)
	* event POSTUPLOAD is send after an ABOR command, or a data connection timeout
	  this allow sfv script to mark file as bad
	* reduced verbosity level (even in debug mode), controlled with 'loglevel'
	  directive in config file
	* new target in Makefile: installdebug (same as install with debug version)
	* tools sitewho,siteuptime ported to cygwin (sem key still hardcoded)
	* sitebot development starts !
	* sitebot: new commands WHO, BNC, UPTIME, HELP, FREE
	* sitebot: reads log file and announce new lines (without formatting)
	* log format defined, to be compatible with glftpd
	* bugfix: again, cygwin does not set correctly variables after dlopen ... I'm
	  soon going to be bored by this damn os
	* big documentation effort (inline, and in documentation files)

2003-02-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* timeout counter is reset only with a few commands
	* bugfix: checkpath denies access when homedir is /
	* files/dirs created are now given to main group of user
	* file entry is removed from perm file when deleted
	* new flag FLAG_TLS to enforce tls/ssl connections for specific users
	* new flag FLAG_ANONYMOUS to deny user from any modification (stor,mkdir,etc)
	* events: mkdir/rmdir send events
	* function perm_check rewritten to handle flags, and to optimize lookups

2003-02-09  Pierre Chifflier  <pollux@wzdftpd.net>

	* MAJOR CHANGE: code converted to multithread (prepare to die !)
	* new directive 'include file' to split config file
	* maximum inclusion level is 16 - find me one good reason to increase this level ?
	* crontab support in main server
	* new directive 'cronjob' to run commands periodically
	* bugfix: in tls implicit mode, if tls negotiation failed, login sequence continues

2003-02-08  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: backend plaintext did not read correctly when homedir is /
	* new directive 'cscript', to execute custom scripts befaore/after some commands
	* backend is commited when server exits
	* access to limiters now restricted by semaphores
	* user stats (dl/ul) are updated and saved in backend
	* cookie: total_ul, total_dl: show user stats

2003-02-03  Pierre Chifflier  <pollux@wzdftpd.net>

	* new directive 'server_uid' in config file, to control which uid the server
	  will drop to after doing privileged operations

2003-01-25  Pierre Chifflier  <pollux@wzdftpd.net>

	* module sfv: progress bar when uploading (based on file NUMBER)
	  incomplete indicator is removed when release is complete

2003-01-16  Pierre Chifflier  <pollux@wzdftpd.net>

	* all '#include' directives in sources files have been changed to include
	  only necessary headers, resulting in a huge compilation speedup

2003-01-09  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: problem in vfs listing (missing first character)
	* bugfix: mkdir was broken
	* bugfix: incorrect answer for MKD (extra "")
	* reopen log files when receiving SIGHUP
	* added 'install', 'uninstall' targets to Makefile
	* module sfv: create incomplete link when uploading sfv (basic)

2003-01-03  Pierre Chifflier  <pollux@wzdftpd.net>

	* begin to change all direct addressing to user/group list by calls to GetUserByID
	* first coverage \ profiling analysis (with kcachegrind)
	* suppressed memset (bzero) call in ClientThreadProc (about 50% of time
	  spent in function !) by appending a \0
	* huge speedup for fct 'readConfigFile' by moving regexp compilation
	  outside the loop - mainly for server init
	* locks on files when uploading - to be tested !
	* bugfix: many site commands remove trailing character (thinking it is /)
	  due to the <old> function checkpath
	* bugfix: many corrections to compile with cygwin
	* bugfix: backend plaintext checks more for errors when reading/writing
	  users file. Do not rotate them, but deep copy and complete write
	  (need mutex), to avoid problems with permissions
	* bugfix: server do not free shm when aborting due to lack of backend
	* server now creates a transfer log (xferlog format)

2002-12-21  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: timeout was checked on connections during transfers, causing disconnections
	* module sfv: 'site sfv create file.sfv' takes files in sfv dir and creates a new
	  sfv file (except for diz/nfo/sfv/txt files)

2002-12-16  Pierre Chifflier  <pollux@wzdftpd.net>

	* server can periodically perform a DNS lookup to detect dynamic ip changes,
	  and rebind if so.
	* when waiting for PASV connection, bind only to specific address
	* choice of log level in config file

2002-12-10  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-1rc2

	* site users: list users online
	* server now tries to bind data PORT connection to control-1 on
	  server-side to be RFC-compliant
	  This should help firewalls (rfc959 section 3.2 982:988)
	* bugfix: invalid permission in 'site checkperm' cause infinite loop

2002-12-06  Pierre Chifflier  <pollux@wzdftpd.net>

	* cookie: pid (need to have flag SITEOP)
	* site chgrp: add/remove user from group(s)
	  site chgrp user group1 [group2 ...]
	* site flags: display a user's flags (without args, show your own flags)
	* site swho: display detailed information about users online
	* site kick: kill all connections from user
	* site kill: kill a pid (if owned by a child)
	* site idle: display / set your idle time
	* site tagline: display / set your tagline
	* if RENAME commands is cross-device, uses internal fct to move dirs
	  works only for dirs, files and (partially) symlinks
	* childs trap SIGTERM to exit cleanly
	* backend version can be tested adding '> nnn' after 'backend = name'
	  backend must define "module_version" version, as a const char *
	* bugfix: server will no more start without backend
	* bugfix: permissions were inserted in wrong order, thus reversing it

2002-12-04  Pierre Chifflier  <pollux@wzdftpd.net>

	* site addip: add ip to user
	  ip is checked to avoid shadowing other ip, or inserting useless ones
	* site delip: delete ip from user
	* site deluser: delete user (mark it as deleted)
	* site readd: unmark user as deleted
	* site change: change user field
	  allow to change name, pass, homedir, tagline, group, max_idle,
	  perms, flags, max_ul, max_dl, num_logins
	* site purge: purge deleted user
	* num_logins directive (backend plaintext): number of simultaneous logins allowed
	* cookie: num_logins
	* bugfix: cookie 'home' uses flag of user instead of context to check permission
	* bugfix: when checking pass, backend plaintext was comparing only length chars
	  of the login
	* bugfix: error in function do_chdir when homedir was / and dir /

2002-12-02  Pierre Chifflier  <pollux@wzdftpd.net>

	* site adduser: what do you think it can be for ?

2002-11-30  Pierre Chifflier  <pollux@wzdftpd.net>

	* server start debug messages prints on stderr (we cannot use out_log neither
	  in init nor in modules/backend loading, because mainConfig is NOT filled
	* this allow to read another config file with the same function
	* server reloads .cfg when receiving SIGHUP, allowing to change all parameters
	  inline, except backends (separate command), hooks and modules (to be done ...)
	* site reload: sends SIGHUP to parent (multiprocess) or self, to reload config

2002-11-26  Pierre Chifflier  <pollux@wzdftpd.net>

	* site utime: change access/modification time of a file
	* separation of code in an exe and a dynamic lib
	* SFV checker is now a separated module

2002-10-27  Pierre Chifflier  <pollux@wzdftpd.net>

	* cookie: speed (show speed of UL/DL, or nothing if not xfering)
	* bugfix: failed binding to port (e.g missing permissions) cause segfault (linux)

2002-10-14  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: could not remove dir at root of a vfs path (missing / in permfile path)

2002-10-11  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: CRITICAL fixed problem with file globbing attack
	  e.g "ls */../*/../*/../*/../*/../*/../*/../*/../*/../*/../*/../*/../*"
	* bugfix: when using wildcards in LIST, pattern was not matched to vfs names
	* linux: If run by root or setuid, drops privileges after binding port

2002-10-10  Pierre Chifflier  <pollux@wzdftpd.net>

	* --- cvs commit TAG: rel-0-1rc1

	* bugfix: CRITICAL functions mkdir/rmdir do not check permissions and creates/removes path
	  with no condition
	* bugfix: CRITICAL list/nlst with parameter of form /../*/.. make the server crash

2002-10-07  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: release version working in background (windows) - file descriptors
	  were not inherited after fork()
	* vfs: when adding vfs, if destination does not exist, do not add vfs
	* vfs: works with virtual files
	* cookies: flags

2002-10-03  Pierre Chifflier  <pollux@wzdftpd.net>

	* perms: group permissions for commands in .cfg
	* perms: negation of permissions (!=user, etc)
	* site who: params of site commands are hidden
	* cookies: maxidle, maxdl, maxul
	* rmdir: works on symlinks

2002-10-01  Pierre Chifflier  <pollux@wzdftpd.net>

	* Unreal Tournament 2k3 is here !
	* bugfix: cookie_replace now exits if the param is null (avoids crash)
	* bugfix: shared memory now working for windows in multi-process version
	* ip per user/group now static
	* cookie: userip_allow<n> (without <> !), show ip allowed n for user
	* site chmod: can handle octal perms: site chmod user 7 tmp == site chmod user rwx tmp
	* group ip checking
	* config: pasv_ip can accept a hostname

2002-09-25  Pierre Chifflier  <pollux@wzdftpd.net>

	* mkdir now sets owner of new dir
	* rmdir checks if dir is not empty (except the perms file) and removes the
	  perm file before removing the dir
	* added timeout check for data connection

2002-09-23  Pierre Chifflier  <pollux@wzdftpd.net>

	* complete rewrite of memory management for users / groups in main prog AND in backend
	  lists will be stored in shared memory
	* bugfix: small bug in wzd_crc32.c where .missing file was created if file was bad

2002-09-18  Pierre Chifflier  <pollux@wzdftpd.net>

	* clear_read function is now non-blocking (if timeout > 0)
	* tls_auth_cont is now non-blocking (TLS control connection)
	* tls_read and tls_write have been changed to handle correctly
	  non-blocking I/O - all tls fct are now subject to timeouts
	* bugfix: fixed critical bug in mkdir, not allowing absolute paths
	* bugfix: small bug in do_site_backend fixed
	* moved user ip checking from backend to main prog

2002-09-16  Pierre Chifflier  <pollux@wzdftpd.net>

	* some changes to have compatibility with intel c compiler (tested with v6.0.139)
	  changes were mainly little corrections of warnings concerning signed / unsigned variables :)
	* bugfix: fixed critical bug in wzd_data.c where if SSL was enabled data were sent crypted
	  even if data connection was in clear (PROT C)
	* added -V option (display version & build number)

2002-09-13  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: fixed stupid critical bug where read & write functions were stored in mainConfig,
	  so all clients shared these functions - even ssl ones.
	* bugfix: forgot to add a \0 at end of file name in sfv_find_sfv

2002-09-06  Pierre Chifflier  <pollux@wzdftpd.net>

	* bugfix: fixed critical bug in data connection, message 150 was sent AFTER waiting
	  the connection to be opened by client, must be BEFORE.
	  Curiously the bug was only visible in ssl-data transfers.
	* tls: tls_auth_data_cont changed to loop around SSL_accept
	* SFV: no more trying to check sfv if sfv file not found or file not in sfv
	* VFS: fixed bug when 2 vfs have same prefix, comparison stopped after first match
	  (e.g: vfs and vfs2 were same dirs)

2002-09-04  Pierre Chifflier  <pollux@wzdftpd.net>

	* hooks: EVENT_PREUPLOAD, EVENT_POSTUPLOAD
	* internal SFV checker, checks file after upload

2002-08-30  Pierre Chifflier  <pollux@wzdftpd.net>

	* Bugfix: changed strtol to strtoul where needed
	* added SFV checking code (wzd_crc32.c), test ok

2002-08-29  Pierre Chifflier  <pollux@wzdftpd.net>

	* VFS: vpath is now visible in ls
	* VFS: fixed permission problem if vpath not in user's rootpath
	* site CHPASS user new_pass

2002-08-19  Pierre Chifflier  <pollux@wzdftpd.net>

	* first VFS implementation (Virtual FileSytem): path translation is ok,
	 but if vfs destination is not in user's root, no access; vpath is not
	 shown in 'ls' but is accessible by 'cd'

2002-08-16  Pierre Chifflier  <pollux@wzdftpd.net>

	* tag were renamed and seperated: myname/username, myip/userip, ...
	* added flags support
	* IP & homedir now hidden, except for FLAG_SEE_IP and FLAG_SEE_HOME
	* flag FLAG_HIDE to hide in who (except for self)
	* first HOOKS implementation (not very clean, some problems with parameters
	  (forced to cast functions :(
	* hooks: EVENT_LOGIN, EVENT_LOGOUT
	* fixed bug in dynamic memory (wzd_ip_t structs)

2002-08-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* site BACKEND close / init /reload back_name: low lovel function to
	  manipulate the backend - mainly usefull for development (ability to
	  compile / change backend without stopping server)
	* many changes in plaintext backend: normalization of structs used,
	  ability to write users file, new fields (tagline,ip_allowed,max_idle_time),
	  bugfixes
	* idle time checking (per user)

2002-08-10  Pierre Chifflier  <pollux@wzdftpd.net>

	* IP checking added in backend, to do after-login check (only allowed
	  ip, default: reject)

2002-08-08  Pierre Chifflier  <pollux@wzdftpd.net>

	* Pre-login ip checking, 3 options: disabled, allow/deny, deny/allow

2002-07-29  Pierre Chifflier  <pollux@wzdftpd.net>

	* specify PASV ip range
	* site checkperm user file perms: ensure user has a specific perm on a dir/file

2002-07-23  Pierre Chifflier  <pollux@wzdftpd.net>

	* fixed problems with these damn '\r' under windows (config files)

2002-07-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* site shutdown now kills the server IMMEDIATLY
	* cookie: usergroup
	* cookie: new option to format length of cookie: %num.cookie
	  (e.g %15.username will make username EXACTLY 15 chars)

2002-07-10  Pierre Chifflier  <pollux@wzdftpd.net>

	* LIST now hide files beginning by . except if -a is passed
	* cookie: possibility of loop using %forallusersconnected / %endfor
	* cookie: lastcommand

2002-07-02  Pierre Chifflier  <pollux@wzdftpd.net>

	* RNFR/RNTO now handles correctly permission file
	* cookie: userip

2002-06-24  Pierre Chifflier  <pollux@wzdftpd.net>

	* site commands that print files content: rules, help
	* first cookie ! (username)

2002-06-20  Pierre Chifflier  <pollux@wzdftpd.net>

	* new commands: allo (=noop), rnfr/rnto
	* shared memory implemented for windows

2002-06-18  Pierre Chifflier  <pollux@wzdftpd.net>

	* fixed bug allowing nonexistant file to be downloaded with a 0 size
	* permissions on command like site *, delete
	* trap signals interrupt, kill, etc. to end server properly
	* now using shared memory to store contexts
	* acls bugfixes

2002-06-12  Pierre Chifflier  <pollux@wzdftpd.net>

	* bandwidth upload / download limitation

2002-06-06  Pierre Chifflier  <pollux@wzdftpd.net>

	* permissions using .dirinfo files
	* hide .dirinfo on commands SIZE, MDTM, RETR, STOR

2002-05-29  Pierre Chifflier  <pollux@wzdftpd.net>

	* implementation of ssl: explicit, explicit_strict, port, data protection, buffer size
	* site uptime, site shutdown

2002-05-28  Pierre Chifflier  <pollux@wzdftpd.net>

	* basic implementation of TLS
	* removed unneeded fork() for data connection
	* code cleanup, better uses of select()

2002-05-20  Pierre Chifflier  <pollux@wzdftpd.net>

	* implementation of RETR, STOR, REST, MDTM ,SIZE, DELE, ABOR
	* fixed bug with mkdir

