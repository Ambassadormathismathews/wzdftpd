This is a small set of directives for building wzdftpd

Prerequisites:

All (only if compiling from CVS):
automake (>= 1.5)
autoconf
libtool

Linux:
* a C compiler (tested with gcc-2.9x, gcc-3.{0,1,2,3} and icc)
* if you want ssl support, openssl-devel headers and libs
* a lexical analyser generator (flex)

Windows:
* visual c++
* if you want ssl support, openssl-devel headers and libs

MacOS X:
* gcc

Solaris:
* gcc, flex, binutils from sunfreeware
* the library name containing gethostbyname (see man)
ex: LDFLAGS="-lxnet -lposix4" ./configure [...]


All paths are relative to rep wzdftpd (root)

1) Generate configure script (if compiling from CVS):
./boostrap
If you're FreeBSD or MacOS X user, read notes below.

2) Configure
./configure [args]
(./configure --help to know args, common args are: --with-pam, --enable-debug and
and --prefix

3) Build executable and backends / modules
make

4) Install
make install

5) Executable can be found in src (if you want to customize install)
The _MINIMUM_ installation is composed of:
- the exe (wzdftpd for linux, wzdftpd.exe for win32)
- the lib (libwzd.so for linux, libwzd.dll for win32)
- the config file (wzd.cfg)
- ONE backend at least, with the backend's config files (libwzdplaintext.so, users)
- files used by site commands (see config file)

You can add modules

Building wzdftpd with icc:
Set CC to icc during configure:
CC=icc ./configure [args]

Building SVN version on OpenBSD:
AUTOMAKE_VERSION=1.9 AUTOCONF_VERSION=2.59 ./bootstrap

Building SVN version on FreeBSD:
It's known that there are some troubles with aclocal on FreeBSD 5.2.1 (and 
may be other versions). The solution is to run aclocal with 
"-I /usr/local/share/aclocal/" arg. If you have troubles with the mpatrol 
you can freely remove it from the configure.in, it's needed for the 
debugging purposes only. 

Use the boostrap script, it works on FreeBSD without a warning.
You just have to edit it and set up the correct names for executables, e.g:

ACLOCAL=aclocal18
AUTOCONF=autoconf259
AUTOHEADER=autoheader259
AUTOMAKE=automake18
LIBTOOLIZE=libtoolize14

Building SVN version on MacOS X:
you bootstrap.local file should contain the following
LIBTOOLIZE=glibtoolize

If you get errors like:
ar cru .libs/libwzd_base.a .libs/hash.o .libs/list.o .libs/stack.o .libs/wzd_strlcat.o .libs/wzd_strtok_r.o~ranlib
.libs/libwzd_base.a
ar: .libs/wzd_strtok_r.o~ranlib: No such file or directory
make[2]: *** [libwzd_base.la] Error 1
Then update the .m4 file from your distribution:
cp /usr/share/aclocal/libtool.m4 m4/
and re-run ./bootstrap
