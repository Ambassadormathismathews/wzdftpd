INCLUDE_DIRECTORIES(${WZDFTPD_SOURCE_DIR}
	${WZDFTPD_SOURCE_DIR}/libwzd-core
	${WZDFTPD_BINARY_DIR}
	${PERL_INCLUDE_PATH}
	)

ADD_DEFINITIONS(-DHAVE_CONFIG_H)

IF(PERL_EXTRA_C_FLAGS)
  ADD_DEFINITIONS(${PERL_EXTRA_C_FLAGS})
ENDIF(PERL_EXTRA_C_FLAGS)

LINK_DIRECTORIES (${WZDFTPD_BINARY_DIR}/modules/perl)

SET(libwzd_perl_SOURCES libwzd_perl.c)

ADD_LIBRARY (libwzd_perl SHARED
	${libwzd_perl_SOURCES}
	perl.def
	)

#SET_SOURCE_FILES_PROPERTIES(${libwzd_perl_SOURCES} COMPILE_FLAGS "${PERL_EXTRA_C_FLAGS}")

if (CYGWIN OR NOT WIN32)
  SET_TARGET_PROPERTIES(libwzd_perl PROPERTIES PREFIX "")
endif (CYGWIN OR NOT WIN32)

SET(perl_LIBS libwzd_core)

IF(PERL_LIBRARY)
  SET(perl_LIBS ${perl_LIBS} ${PERL_LIBRARY})
ENDIF(PERL_LIBRARY)

TARGET_LINK_LIBRARIES (libwzd_perl ${perl_LIBS})

INSTALL(TARGETS libwzd_perl DESTINATION ${MODULES_INSTALL_PATH})
